<!DOCTYPE html>
<html lang="uk">
<head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3DNVM302YW"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-3DNVM302YW');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>OCR ‚Äî –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É –∑ –∑–æ–±—Ä–∞–∂–µ–Ω—å</title>
    <meta name="description" content="–û–Ω–ª–∞–π–Ω OCR ‚Äî —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É –∑ –∑–æ–±—Ä–∞–∂–µ–Ω—å –±–µ–∑ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä.">

    <style>
        :root {
            --bg-dark: #0f172a;
            --bg-light: #f9fafb;
            --card-dark: #1e293b;
            --card-light: #ffffff;
            --text-dark: #f1f5f9;
            --text-light: #111827;
            --primary: #2563eb;
            --primary-hover: #1e40af;
            --radius: 14px;
            --shadow: 0 6px 20px rgba(0,0,0,.2);
        }

        body {
            margin: 0;
            font-family: "Segoe UI", sans-serif;
            background: var(--bg-dark);
            color: var(--text-dark);
            min-height: 100vh;
        }

        body.light {
            background: var(--bg-light);
            color: var(--text-light);
        }

        header {
            text-align: center;
            padding: 60px 20px 30px;
        }

        h1 {
            font-size: 2.4rem;
            margin-bottom: 10px;
        }

        p {
            opacity: .85;
        }

        .container {
            max-width: 900px;
            margin: auto;
            padding: 20px;
        }

        .card {
            background: var(--card-dark);
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
        }

        body.light .card {
            background: var(--card-light);
        }

        input[type=file] {
            margin: 15px 0;
        }

        button {
            background: var(--primary);
            color: #fff;
            border: none;
            padding: 12px 22px;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 1rem;
            box-shadow: var(--shadow);
        }

        button:hover {
            background: var(--primary-hover);
        }

        .preview {
            margin-top: 15px;
            text-align: center;
        }

        .preview img {
            max-width: 100%;
            border-radius: var(--radius);
            margin-top: 10px;
        }

        .status {
            margin-top: 15px;
            font-size: .95rem;
            color: #93c5fd;
            white-space: pre-line;
        }

        .result {
            margin-top: 20px;
            background: rgba(0,0,0,.3);
            padding: 15px;
            border-radius: var(--radius);
            white-space: pre-wrap;
            min-height: 120px;
        }

        body.light .result {
            background: #f3f4f6;
        }

        .theme-toggle {
            margin: 30px auto;
            display: block;
        }
    </style>
</head>

<body>

<header>
    <h1>üñºÔ∏è OCR ‚Äî –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É</h1>
    <p>–ó–∞–≤–∞–Ω—Ç–∞–∂ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —ñ –æ—Ç—Ä–∏–º–∞–π —Ç–µ–∫—Å—Ç –ø—Ä—è–º–æ —É –±—Ä–∞—É–∑–µ—Ä—ñ</p>
</header>

<div class="container">
    <div class="card">

        <input type="file" id="imageInput" accept="image/*">

        <button onclick="startOCR()">–†–æ–∑–ø—ñ–∑–Ω–∞—Ç–∏ —Ç–µ–∫—Å—Ç</button>

        <div class="preview" id="preview"></div>

        <div class="status" id="status">–°—Ç–∞—Ç—É—Å: –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É</div>

        <div class="result" id="result">–†–µ–∑—É–ª—å—Ç–∞—Ç –∑ º—è–≤–∏—Ç—å—Å—è —Ç—É—Ç...</div>

    </div>

    <button class="theme-toggle" onclick="toggleTheme()">üåì –ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É</button>
</div>

<!-- Tesseract.js -->
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@2.1.5/dist/tesseract.min.js"></script>

<script>
/* ===== –¢–ï–ú–ê ===== */
function toggleTheme() {
    document.body.classList.toggle("light");
}

/* ===== OCR ===== */
function startOCR() {
    const input = document.getElementById("imageInput");
    const result = document.getElementById("result");
    const status = document.getElementById("status");
    const preview = document.getElementById("preview");

    console.clear();

    if (!input.files || input.files.length === 0) {
        alert("‚ùå –§–∞–π–ª –Ω–µ –≤–∏–±—Ä–∞–Ω–æ");
        return;
    }

    const file = input.files[0];
    console.log("üìÅ –§–∞–π–ª:", file);

    /* Preview */
    const reader = new FileReader();
    reader.onload = () => {
        preview.innerHTML = `<img src="${reader.result}">`;
    };
    reader.readAsDataURL(file);

    result.textContent = "";
    status.textContent = "üîÑ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è OCR...";

    Tesseract.recognize(
        file,
        'eng',   // —Å—Ç–∞–±—ñ–ª—å–Ω–∞ –º–æ–≤–∞
        {
            logger: m => {
                console.log(m);
                if (m.progress) {
                    status.textContent =
                        `üîç ${m.status}\n‚è≥ ${Math.round(m.progress * 100)}%`;
                }
            }
        }
    )
    .then(({ data }) => {
        console.log("‚úÖ –ì–æ—Ç–æ–≤–æ", data);
        result.textContent = data.text || "‚ö†Ô∏è –¢–µ–∫—Å—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ";
        status.textContent = "‚úÖ –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ";
    })
    .catch(err => {
        console.error("‚ùå OCR –ø–æ–º–∏–ª–∫–∞:", err);
        status.textContent = "‚ùå –ü–æ–º–∏–ª–∫–∞ OCR (–¥–∏–≤. –∫–æ–Ω—Å–æ–ª—å)";
    });
}
</script>

</body>
</html>
